<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta content="width=device-width, initial-scale=1" name="viewport" />
    <title>Rain with music</title>
    
    <link rel="stylesheet" href="style.css">
    <link rel="icon" href="favicon.ico">
    <script src="index.js"></script>

    
    <link rel="canonical" href="https://rain-yt.vercel.app/" />
    <link rel="manifest" href="/manifest.webmanifest">
</head>

<body>


    <!--remove --> 
    <script>
        if (navigator.serviceWorker) {
          navigator.serviceWorker.register (
            '/sw.js',
            {scope: '/'}
          )
        }
    </script>
    <!--remove --> 
    <section>
        


        <div class="iframeContainer">
            <div class="search">

          
                <a href="" id=lnk></a> <br> 
                
                <input type='text' id='userInput' class='form-control' value='' placeholder="Enter video or playlist ID (after last = sign)" />
                <input type='button' id='myBtn' class='btn-outline-secondary' onclick='changeText2()' value='Go!' />
            </div>
            
            <iframe  id="mainframe" class="iframeContent" src="https://www.youtube.com/embed/videoseries?si=vpMvKSHRp4MlEmcr&amp;list=PLjE24dapzlxRl42ELixBrgrIkxo56krTq&autoplay=1&showinfo=0&loop=1&rel=0" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe> 


            <h1 class="credit">Rain effect <a href="https://github.com/SardineFish/raindrop-fx/tree/master" target="_blank">credits</a></h1>

        </div>
        
        

    

        


        <div id="root">
            <canvas id="canvas"></canvas>
        </div>
        <script src="script.js"></script>
        
        

    

        <script type="text/javascript">
            function changeText2() {
            
            var userInput = document.getElementById('userInput').value;
            var lnk = document.getElementById('lnk');

            //    
            var url
                
            if (!userInput.length){
                url = "https://www.youtube.com/embed/videoseries?si=vpMvKSHRp4MlEmcr&amp;list=PLjE24dapzlxRl42ELixBrgrIkxo56krTq&autoplay=1&showinfo=0&loop=1&rel=0";
            }
                
            else if (userInput.length === 11) {
                url = "https://www.youtube.com/embed/"+ userInput +"?si=CB4a528bXk0qmyPT"+"&autoplay=1&showinfo=0&loop=1&rel=0";
            }

            else if (userInput.length > 34) {
                console.log(userInput);
                url = "https://www.youtube.com/embed/"+ userInput.split('=')[-1] +"?si=CB4a528bXk0qmyPT"+"&autoplay=1&showinfo=0&loop=1&rel=0";
            }

            else {
                url= "https://www.youtube.com/embed/videoseries?si=vpMvKSHRp4MlEmcr&amp;list="+userInput+"&autoplay=1&showinfo=0&loop=1&rel=0" ;
            }
                
            //
                
            // var url= "https://www.youtube.com/embed/videoseries?si=vpMvKSHRp4MlEmcr&amp;list="+userInput+"&autoplay=1&showinfo=0&loop=1&rel=0" ;
            document.getElementById("mainframe").src=url;
            }

            var input = document.getElementById("userInput");
            input.addEventListener("keyup", function(event) {
            if (event.keyCode === 13) {
                event.preventDefault();
                document.getElementById("myBtn").click();
            }
            });

            var input = document.querySelectorAll('input');
            for(i=0; i<input.length; i++){
            input[i].setAttribute('size',input[i].getAttribute('placeholder').length);
            }
            
        </script>
    </section>
    
</body>
</html>
